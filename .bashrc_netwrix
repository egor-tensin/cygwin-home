#!/usr/bin/env bash

if [ -n "${BASHRC_NETWRIX+x}" ]; then
    return 0
else
    readonly BASHRC_NETWRIX=1
fi

source .bashrc_git  || return
source .bashrc_text || return

export nwx_host=172.28.10.2
export nwx_dev2=172.28.19.60
export nwx_dev3=172.28.19.61

lint_webapi() (
    set -o errexit
    set -o pipefail

    local root_dir='/cygdrive/c/Netwrix Auditor/CurrentVersion-AuditCore-Dev/AuditCore/Sources'

    local -a paths
    local path

    cd "$root_dir/Configuration"
    while IFS= read -d '' -r path; do
        paths+=("$path")
    done < <( find . -type f -\( -iname 'WebAPI*.acinc' -o -iname 'WebAPI*.acconf' -\) -print0 )

    cd "$root_dir/Subsystems/PublicAPI"
    while IFS= read -d '' -r path; do
        paths+=("$path")
    done < <( find . -type f -\( -iname '*.cpp' -o -iname '*.h' -\) -print0 )

    doslint "${paths[@]+"${paths[@]}"}"
)

backup_repo_nwx() {
    backup_repo '//spbfs02/P/Personal/Egor Tensin'
}
